import{g as Y,a as Z,_ as q,u as da,b as h,c as aa,j as t,d as C,e as ea,f as pa,s as T,h as w,i as D,k as ta,l as ua,m as O,n as sa,o as oa,p as ia,q as na,S as $,t as ga,B as u,T as c,P as ra,v as E,w as xa,A as U,x as fa,L as ha}from"./index-DNNHYI1S.js";import{F as va,u as ba,a as ma}from"./FilterField-6wYlR0Na.js";import{P as ja}from"./PageHeader-BC6pQkd4.js";import{F as ya,u as Ca,f as Pa}from"./useListQuery-D6rOtTVj.js";import{L as V,F as G,S as $a,D as Ra}from"./DataGrid-CcI9YOfF.js";import{A as ka,C as za}from"./Close-CiygbmCR.js";import"./DatePicker-DzahrMYG.js";import"./DateCalendar-Dm41rWnV.js";import"./colorManipulator-DwAJFZtI.js";import"./useQuery--CxMVdV9.js";import"./useGridRootProps-Dp7UzkF7.js";import"./MenuItem-CFFZ-6LB.js";import"./dividerClasses-BvSR8Wm_.js";import"./Divider-VaQ6VjPG.js";function Fa(a){return Y("MuiPagination",a)}Z("MuiPagination",["root","ul","outlined","text"]);const Sa=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Ma(a={}){const{boundaryCount:e=1,componentName:s="usePagination",count:o=1,defaultPage:g=1,disabled:v=!1,hideNextButton:b=!1,hidePrevButton:n=!1,onChange:m,page:d,showFirstButton:P=!1,showLastButton:B=!1,siblingCount:R=1}=a,p=q(a,Sa),[r,N]=da({controlled:d,default:g,name:s,state:"page"}),M=(i,z)=>{d||N(z),m&&m(i,z)},j=(i,z)=>{const f=z-i+1;return Array.from({length:f},(S,ca)=>i+ca)},I=j(1,Math.min(e,o)),x=j(Math.max(o-e+1,e+1),o),L=Math.max(Math.min(r-R,o-e-R*2-1),e+2),F=Math.min(Math.max(r+R,e+R*2+2),x.length>0?x[0]-2:o-1),l=[...P?["first"]:[],...n?[]:["previous"],...I,...L>e+2?["start-ellipsis"]:e+1<o-e?[e+1]:[],...j(L,F),...F<o-e-1?["end-ellipsis"]:o-e>e?[o-e]:[],...x,...b?[]:["next"],...B?["last"]:[]],_=i=>{switch(i){case"first":return 1;case"previous":return r-1;case"next":return r+1;case"last":return o;default:return null}},k=l.map(i=>typeof i=="number"?{onClick:z=>{M(z,i)},type:"page",page:i,selected:i===r,disabled:v,"aria-current":i===r?"true":void 0}:{onClick:z=>{M(z,_(i))},type:i,page:_(i),selected:!1,disabled:v||i.indexOf("ellipsis")===-1&&(i==="next"||i==="last"?r>=o:r<=1)});return h({items:k},p)}function Ia(a){return Y("MuiPaginationItem",a)}const y=Z("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),H=aa(t.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),J=aa(t.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Ba=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],la=(a,e)=>{const{ownerState:s}=a;return[e.root,e[s.variant],e[`size${D(s.size)}`],s.variant==="text"&&e[`text${D(s.color)}`],s.variant==="outlined"&&e[`outlined${D(s.color)}`],s.shape==="rounded"&&e.rounded,s.type==="page"&&e.page,(s.type==="start-ellipsis"||s.type==="end-ellipsis")&&e.ellipsis,(s.type==="previous"||s.type==="next")&&e.previousNext,(s.type==="first"||s.type==="last")&&e.firstLast]},Na=a=>{const{classes:e,color:s,disabled:o,selected:g,size:v,shape:b,type:n,variant:m}=a,d={root:["root",`size${D(v)}`,m,b,s!=="standard"&&`color${D(s)}`,s!=="standard"&&`${m}${D(s)}`,o&&"disabled",g&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[n]],icon:["icon"]};return ta(d,Ia,e)},La=T("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:la})(({theme:a,ownerState:e})=>h({},a.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(a.vars||a).palette.text.primary,height:"auto",[`&.${y.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity}},e.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},e.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:a.typography.pxToRem(15)})),_a=T(ua,{name:"MuiPaginationItem",slot:"Root",overridesResolver:la})(({theme:a,ownerState:e})=>h({},a.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(a.vars||a).palette.text.primary,[`&.${y.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`&.${y.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity},transition:a.transitions.create(["color","background-color"],{duration:a.transitions.duration.short}),"&:hover":{backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${y.selected}`]:{backgroundColor:(a.vars||a).palette.action.selected,"&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.hoverOpacity}))`:O.alpha(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(a.vars||a).palette.action.selected}},[`&.${y.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:O.alpha(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)},[`&.${y.disabled}`]:{opacity:1,color:(a.vars||a).palette.action.disabled,backgroundColor:(a.vars||a).palette.action.selected}}},e.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},e.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:a.typography.pxToRem(15)},e.shape==="rounded"&&{borderRadius:(a.vars||a).shape.borderRadius}),({theme:a,ownerState:e})=>h({},e.variant==="text"&&{[`&.${y.selected}`]:h({},e.color!=="standard"&&{color:(a.vars||a).palette[e.color].contrastText,backgroundColor:(a.vars||a).palette[e.color].main,"&:hover":{backgroundColor:(a.vars||a).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(a.vars||a).palette[e.color].main}},[`&.${y.focusVisible}`]:{backgroundColor:(a.vars||a).palette[e.color].dark}},{[`&.${y.disabled}`]:{color:(a.vars||a).palette.action.disabled}})},e.variant==="outlined"&&{border:a.vars?`1px solid rgba(${a.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${a.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${y.selected}`]:h({},e.color!=="standard"&&{color:(a.vars||a).palette[e.color].main,border:`1px solid ${a.vars?`rgba(${a.vars.palette[e.color].mainChannel} / 0.5)`:O.alpha(a.palette[e.color].main,.5)}`,backgroundColor:a.vars?`rgba(${a.vars.palette[e.color].mainChannel} / ${a.vars.palette.action.activatedOpacity})`:O.alpha(a.palette[e.color].main,a.palette.action.activatedOpacity),"&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette[e.color].mainChannel} / calc(${a.vars.palette.action.activatedOpacity} + ${a.vars.palette.action.focusOpacity}))`:O.alpha(a.palette[e.color].main,a.palette.action.activatedOpacity+a.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${y.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette[e.color].mainChannel} / calc(${a.vars.palette.action.activatedOpacity} + ${a.vars.palette.action.focusOpacity}))`:O.alpha(a.palette[e.color].main,a.palette.action.activatedOpacity+a.palette.action.focusOpacity)}},{[`&.${y.disabled}`]:{borderColor:(a.vars||a).palette.action.disabledBackground,color:(a.vars||a).palette.action.disabled}})})),Oa=T("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(a,e)=>e.icon})(({theme:a,ownerState:e})=>h({fontSize:a.typography.pxToRem(20),margin:"0 -8px"},e.size==="small"&&{fontSize:a.typography.pxToRem(18)},e.size==="large"&&{fontSize:a.typography.pxToRem(22)})),Da=C.forwardRef(function(e,s){const o=ea({props:e,name:"MuiPaginationItem"}),{className:g,color:v="standard",component:b,components:n={},disabled:m=!1,page:d,selected:P=!1,shape:B="circular",size:R="medium",slots:p={},type:r="page",variant:N="text"}=o,M=q(o,Ba),j=h({},o,{color:v,disabled:m,selected:P,shape:B,size:R,type:r,variant:N}),I=pa(),x=Na(j),F=(I?{previous:p.next||n.next||J,next:p.previous||n.previous||H,last:p.first||n.first||G,first:p.last||n.last||V}:{previous:p.previous||n.previous||H,next:p.next||n.next||J,first:p.first||n.first||G,last:p.last||n.last||V})[r];return r==="start-ellipsis"||r==="end-ellipsis"?t.jsx(La,{ref:s,ownerState:j,className:w(x.root,g),children:"â€¦"}):t.jsxs(_a,h({ref:s,ownerState:j,component:b,disabled:m,className:w(x.root,g)},M,{children:[r==="page"&&d,F?t.jsx(Oa,{as:F,ownerState:j,className:x.icon}):null]}))}),Wa=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],Aa=a=>{const{classes:e,variant:s}=a;return ta({root:["root",s],ul:["ul"]},Fa,e)},Ta=T("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(a,e)=>{const{ownerState:s}=a;return[e.root,e[s.variant]]}})({}),Ea=T("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(a,e)=>e.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function wa(a,e,s){return a==="page"?`${s?"":"Go to "}page ${e}`:`Go to ${a} page`}const qa=C.forwardRef(function(e,s){const o=ea({props:e,name:"MuiPagination"}),{boundaryCount:g=1,className:v,color:b="standard",count:n=1,defaultPage:m=1,disabled:d=!1,getItemAriaLabel:P=wa,hideNextButton:B=!1,hidePrevButton:R=!1,renderItem:p=k=>t.jsx(Da,h({},k)),shape:r="circular",showFirstButton:N=!1,showLastButton:M=!1,siblingCount:j=1,size:I="medium",variant:x="text"}=o,L=q(o,Wa),{items:F}=Ma(h({},o,{componentName:"Pagination"})),l=h({},o,{boundaryCount:g,color:b,count:n,defaultPage:m,disabled:d,getItemAriaLabel:P,hideNextButton:B,hidePrevButton:R,renderItem:p,shape:r,showFirstButton:N,showLastButton:M,siblingCount:j,size:I,variant:x}),_=Aa(l);return t.jsx(Ta,h({"aria-label":"pagination navigation",className:w(_.root,v),ownerState:l,ref:s},L,{children:t.jsx(Ea,{className:_.ul,ownerState:l,children:F.map((k,i)=>t.jsx("li",{children:p(h({},k,{color:b,"aria-label":P(k.type,k.page,k.selected),shape:r,size:I,variant:x}))},i))})}))}),Ua=({filterConfigs:a,onClose:e})=>t.jsx(ya,{grouped:!1,onClose:e,sx:{border:"none"},children:a.map((s,o)=>t.jsx(va,{field:s.field,label:s.label,operator:"contains",filterComponent:s.filterComponent,filterProps:s.filterProps},`${s.field}-${o}`))});var W={},Q;function Va(){if(Q)return W;Q=1;var a=sa();Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var e=a(oa()),s=ia();return W.default=(0,e.default)((0,s.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt"),W}var Ga=Va();const Ha=na(Ga);var A={},K;function Ja(){if(K)return A;K=1;var a=sa();Object.defineProperty(A,"__esModule",{value:!0}),A.default=void 0;var e=a(oa()),s=ia();return A.default=(0,e.default)((0,s.jsx)("path",{d:"M3 18h6v-2H3zM3 6v2h18V6zm0 7h12v-2H3z"}),"Sort"),A}var Qa=Ja();const Ka=na(Qa),Xa=({item:a,previewItem:e,setPreviewItem:s})=>{const o=()=>{s(a)};return t.jsxs($,{className:(e==null?void 0:e.id)===a.id?"selected":"","data-testid":"sdr-data-list-card",direction:"row",onClick:()=>o(),sx:{padding:1,transition:"0.25s","&:hover":{bgcolor:"neutral.light"},"&.selected":{bgcolor:ga[50]}},children:[t.jsx(u,{sx:{display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"neutral.dark",height:70,width:70},children:t.jsx(c,{fontSize:"small",children:"<Image>"})}),t.jsxs(u,{flex:1,children:[t.jsx(c,{sx:{color:"primary.main",fontWeight:"bold"},children:a["Metric "]||a.Metric||"N/A"}),a.Details&&t.jsx(c,{sx:{WebkitBoxOrient:"vertical",WebkitLineClamp:"2",display:"-webkit-box",overflow:"hidden",marginTop:.5},children:a.Details}),t.jsxs(c,{sx:{fontSize:"small",marginTop:1,color:"text.secondary"},children:[a[2023]&&t.jsxs("span",{style:{marginRight:"12px"},children:["2023: ",a[2023]]}),a[2024]&&t.jsxs("span",{style:{marginRight:"12px"},children:["2024: ",a[2024]]}),a[2025]&&t.jsxs("span",{style:{marginRight:"12px"},children:["2025: ",a[2025]]}),a[2026]&&t.jsxs("span",{children:["2026: ",a[2026]]})]})]})]})},Ya=({filterConfigs:a,onToggleFiltersPanel:e,previewItem:s,setPreviewItem:o})=>{const{activeFilters:g}=ba(),[v,b]=C.useState(""),[n,m]=C.useState(1),d=10,[P,B]=C.useState((n-1)*d),[R,p]=C.useState(1),[r,N]=C.useState([]),M="client",{isPending:j,isError:I,data:x,error:L}=Ca({activeFilters:g,dataSource:"data/Metrics Summary.csv",filterConfigs:a,offset:P,pageSize:d,queryMode:M,staticParams:null}),F=(x==null?void 0:x.map((f,S)=>({...f,id:f.id||`row-${S}`})))||[],l=Pa(F,g,a,v),k=new Array(d).fill(null).map((f,S)=>S),i=f=>{b(f.target.value)},z=(f,S)=>{m(S)};return C.useEffect(()=>{l&&p(l.length)},[l]),C.useEffect(()=>{B((n-1)*d)},[n]),C.useEffect(()=>{l&&N(l.filter((f,S)=>S>=P&&S<P+d))},[l,P]),t.jsxs(ra,{elevation:0,children:[t.jsxs($,{direction:"row",spacing:2,alignItems:"center",sx:{padding:2},children:[t.jsx(E,{startIcon:t.jsx(Ha,{}),onClick:e,children:"Filters"}),t.jsx(E,{startIcon:t.jsx(Ka,{}),children:"Sort"}),t.jsx(u,{flex:1,children:t.jsx(xa,{variant:"outlined",label:"Search",size:"small",value:v,fullWidth:!0,onChange:i})})]}),t.jsxs($,{direction:"row",sx:{padding:2},children:[j&&t.jsx(u,{flex:1,sx:{padding:2},children:k.map(f=>t.jsx($a,{height:100},f))}),I&&t.jsx($,{flex:1,children:t.jsx(ka,{severity:"error",children:L.message})}),l&&l.length>0&&t.jsx($,{flex:1,children:r==null?void 0:r.map(f=>t.jsx(Xa,{item:f,previewItem:s,setPreviewItem:o},f.id))}),l&&l.length===0&&t.jsx($,{flex:1,children:t.jsx(c,{children:"No data matches your search"})}),!s&&t.jsx(u,{sx:{display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"neutral.dark",height:700,width:400},children:t.jsx(c,{children:"<Map>"})})]}),t.jsx(qa,{count:Math.ceil(R/d),page:n,onChange:z,sx:{padding:2}})]})},Za=[{field:"file_name",headerName:"File Name",flex:1},{field:"file_size",headerName:"Size",type:"number",width:150}],ae=[{file_name:"file1.csv",file_size:"15 MB"},{file_name:"file2.json",file_size:"117 MB"},{file_name:"file3.json",file_size:"4 MB"}],ee=({previewItem:a,onClose:e})=>t.jsx(ra,{elevation:0,sx:{height:"100%",padding:2},children:t.jsxs($,{spacing:3,children:[t.jsxs($,{spacing:1,children:[t.jsxs($,{direction:"row",children:[t.jsx(c,{variant:"h6",component:"h3",flex:1,children:t.jsx(U,{to:"/search-data-repositories/$id",params:{id:a.id},underline:"hover",children:a.title})}),t.jsx(fa,{size:"small",onClick:e,children:t.jsx(za,{})})]}),t.jsx(c,{variant:"body2",children:"(Optional) Entity description or helper text."})]}),t.jsxs(u,{children:[t.jsx(c,{fontWeight:"medium",mb:1,children:"Dates"}),t.jsx(ha,{rows:[{label:"Publication Date",value:"2019-01-01"},{label:"Start Date",value:"2019-01-01"},{label:"End Date",value:"2019-01-01"}]})]}),t.jsxs(u,{children:[t.jsx(c,{fontWeight:"medium",mb:1,children:"Citation"}),t.jsx(c,{children:"Labore proident do aute et esse adipisicing veniam eiusmod culpa pariatur sunt officia."})]}),a.summary&&t.jsxs(u,{children:[t.jsx(c,{fontWeight:"medium",mb:1,children:"Summary"}),t.jsx(c,{children:a.summary})]}),a.tags&&t.jsxs(u,{children:[t.jsx(c,{fontWeight:"medium",mb:1,children:"Tags"}),t.jsx(c,{children:a.tags.map((s,o)=>a.tags&&o<a.tags.length-1?t.jsx("span",{children:`${s}, `},`${s}-${o}`):t.jsx("span",{children:s},`${s}-${o}`))})]}),t.jsxs(u,{children:[t.jsx(c,{fontWeight:"medium",mb:1,children:"Attached Files"}),t.jsx(Ra,{getRowId:s=>s.file_name,rows:ae,columns:Za,disableRowSelectionOnClick:!0,initialState:{pagination:{paginationModel:{pageSize:5}}}})]}),t.jsxs($,{direction:"row",children:[t.jsx(U,{to:"/search-data-repositories/$id",params:{id:a.id},children:t.jsx(E,{variant:"contained",children:"View datasets"})}),t.jsx(E,{variant:"outlined",children:"Download files"})]})]})}),X=[{field:"category",label:"Category",operator:"contains-one-of",filterComponent:"CheckboxList",filterProps:{options:[{label:"Groundwater",value:"Groundwater"},{label:"Fires",value:"Fires"},{label:"Floods",value:"Floods"},{label:"Earthquakes",value:"Earthquakes"}]}},{field:"tags",label:"Tags",operator:"contains-one-of",filterComponent:"CheckboxList",filterProps:{options:[{label:"Boreal forest",value:"Boreal forest"},{label:"Carbon and greenhouse gas emissions",value:"Carbon and greenhouse gas emissions"},{label:"Ecology",value:"Ecology"}]}},{field:"publication_date",label:"Publication Date",operator:"between-dates-inclusive",filterComponent:"DateRange"}],he=function(){const[e,s]=C.useState(),[o,g]=C.useState(!0),v=()=>{g(!1)},b=()=>{g(!o)},n=()=>{s(null)};return t.jsx(ma,{children:t.jsxs(u,{children:[t.jsx(ja,{pageTitle:"Search Data Repositories App",description:"Description of this app section",sx:{marginBottom:1,padding:2}}),t.jsx(u,{children:t.jsxs($,{direction:"row",children:[o&&t.jsx(u,{sx:{width:"350px"},children:t.jsx(Ua,{filterConfigs:X,onClose:v})}),t.jsx(u,{sx:{border:"none",flex:1,minHeight:"600px",minWidth:0},children:t.jsx(Ya,{filterConfigs:X,onToggleFiltersPanel:b,previewItem:e,setPreviewItem:s})}),e&&t.jsx(u,{sx:{maxWidth:"600px",minWidth:"400px"},children:t.jsx(ee,{previewItem:e,onClose:n})})]})})]})})};export{he as component};
